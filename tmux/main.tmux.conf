# ╭─────────────────────────────────────────────────────────────╮
# │                  🎨 TMUX CATPPUCCIN CONFIG                  │
# │                   Упрощенный и красивый                     │
# ╰─────────────────────────────────────────────────────────────╯

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🧩 ПЛАГИНЫ
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-cpu'

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  ⚙️ ОСНОВНЫЕ НАСТРОЙКИ
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Перезагрузка конфига
unbind r
bind r source-file ~/.tmux.conf \; display "✨ Конфиг перезагружен!"

# Смена префикса на Ctrl+s
set -g prefix C-s
unbind C-b
bind C-s send-prefix

# Поддержка мыши
set -g mouse on

# Улучшения терминала
set -g default-terminal "screen-256color"
set -ag terminal-overrides ",xterm-256color:Tc"

# Убираем задержку ESC
set -sg escape-time 0

# Статус бар сверху
set-option -g status-position top

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🧭 НАВИГАЦИЯ
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Vim-навигация между панелями
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Разделение панелей
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Изменение размера панелей
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🎨 CATPPUCCIN MOCHA ЦВЕТА
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Палитра цветов
bg="#1e1e2e"           # Фон
fg="#cdd6f4"           # Основной текст
surface0="#313244"     # Поверхность
surface1="#45475a"     # Поверхность светлее
overlay0="#6c7086"     # Наложение
blue="#89b4fa"         # Синий (активные элементы)
green="#a6e3a1"        # Зеленый (пользователь)
yellow="#f9e2af"       # Желтый (активное окно)
red="#f38ba8"          # Красный (CPU)
mauve="#cba6f7"        # Фиолетовый (RAM)
pink="#f5c2e7"         # Розовый (разделители)
lavender="#b4befe"     # Лавандовый
text="#cdd6f4"         # Текст

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  📊 СТАТУС БАР
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Основные настройки статус бара
set -g status-style "bg=$bg,fg=$fg"
set -g status-left-length 100
set -g status-right-length 100
set -g status-interval 5

# Стиль окон
set -g window-status-separator ""

# Активное окно
setw -g window-status-current-format "#[fg=$bg,bg=$yellow] #I #[fg=$bg,bg=$yellow,bold] #W #[fg=$yellow,bg=$bg]"

# Неактивные окна
setw -g window-status-format "#[fg=$overlay0,bg=$surface0] #I #[fg=$fg,bg=$surface0] #W #[fg=$surface0,bg=$bg]"

# Левая часть: пользователь и название окна
set -g status-left "#[fg=$bg,bg=$green,bold] 󰀄 #(whoami) #[fg=$green,bg=$surface1]#[fg=$fg,bg=$surface1] 󰧨 #S #[fg=$surface1,bg=$bg] "

# Центральная часть будет автоматически заполнена окнами

# Правая часть: CPU и RAM
set -g status-right "#[fg=$surface1,bg=$bg]#[fg=$fg,bg=$surface1] 󰍛 #{cpu_percentage} #[fg=$red,bg=$surface1]#[fg=$bg,bg=$red,bold] 󰆼 #{ram_percentage} "

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🖼️ ПАНЕЛИ И ГРАНИЦЫ
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Границы панелей
set -g pane-border-style "fg=$surface0"
set -g pane-active-border-style "fg=$blue"

# Сообщения
set -g message-style "fg=$pink,bg=$surface0"
set -g message-command-style "fg=$pink,bg=$surface0"

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🔧 ДОПОЛНИТЕЛЬНЫЕ НАСТРОЙКИ
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Нумерация с 1
set -g base-index 1
setw -g pane-base-index 1

# Перенумерация окон при закрытии
set -g renumber-windows on

# Автоматическое переименование
setw -g automatic-rename on
set -g set-titles on

# История
set -g history-limit 10000

# Копирование в стиле vim
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'pbcopy'

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  🚀 ИНИЦИАЛИЗАЦИЯ TPM
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Эта строка должна быть в самом конце файла
run '~/.tmux/plugins/tpm/tpm'

# ╭─────────────────────────────────────────────────────────────╮
# │  🎉 Готово! Нажмите Ctrl+s затем r для перезагрузки        │
# ╰─────────────────────────────────────────────────────────────╯